export type Locale = "pt" | "en";

export const translations = {
  pt: {
    nav: {
      calculator: "Calculadora",
      login: "Login com Discord",
      loginShort: "Entrar",
      dashboard: "Dashboard",
      newOffer: "Nova oferta",
      logout: "Sair",
      admin: "Admin",
      adminItems: "Preços dos itens",
      disputes: "Disputas",
      rep: "REP",
      back: "Voltar",
      viewOffer: "Ver proposta",
      theme: "Tema",
      light: "Claro",
      dark: "Escuro",
      language: "Idioma",
    },
    home: {
      title: "GPO Trader",
      subtitle: "Mercado Seguro Grand Piece Online",
      description: "Web of Trust para trocas justas em GPO. Reputação real, sem golpes.",
      heroTitle: "Domine o Mercado de",
      heroSubtitle: "Trocas seguras e sem golpes. Reputação real, confirmação dupla e preços justos — o que você combina é o que você leva.",
      ctaMarket: "Explorar Mercado",
      ctaSell: "Vender Item",
      statusAlpha: "Status: Fase de desenvolvimento (Alpha)",
      whyTitle: "Por que trocar aqui?",
      feature1Title: "Trust Protocol",
      feature1Desc: "Sistema de reputação baseado em trocas reais. Contas antigas e histórico limpo têm mais peso — sem fake, sem manipulação.",
      feature2Title: "Preço Justo",
      feature2Desc: "Algoritmo anti-inflação: preços sugeridos pela média ponderada das últimas trocas, com mais peso para Yonko e Brokers.",
      feature3Title: "Segurança",
      feature3Desc: "Verificação dupla: comprador e vendedor confirmam a troca no jogo. Só então a reputação sobe e o negócio fecha.",
      footerTagline: "GPO Trader · Mercado seguro para Grand Piece Online",
      cta: "Ver mercado",
      statsTrades: "Trocas",
      statsVolume: "Volume",
      statsUsers: "Usuários",
    },
    market: {
      title: "Mercado",
      titleGlobal: "Mercado global",
      description: "Ofertas recentes de jogadores verificados.",
      loadMore: "Carregar mais ofertas",
      noListings: "Nenhuma oferta no momento.",
      selling: "Vendendo",
      buying: "Comprando",
      itemsInPackage: "itens no pacote",
      item: "item",
      clickDetails: "Clique para ver detalhes",
      backToMarket: "Voltar ao mercado",
      createOffer: "Criar oferta",
      analytics: "Bolsa / Economia",
      emptyTitle: "O mercado está vazio",
      emptyDesc: "Seja o primeiro a listar um item e ganhe reputação.",
      createFirstOffer: "Criar primeira oferta",
      online: "Online",
      user: "Usuário",
    },
    create: {
      title: "Nova oferta",
      description: "Escolha o tipo de oferta e os itens. Máximo 10 itens por oferta; quantidade de 1 a 30 por item.",
      activeListings: "Ofertas ativas",
      typeLabel: "Tipo de oferta",
      alertBlockedTitle: "Conta bloqueada para criar ofertas",
      alertTooNewTitle: "Conta Discord muito nova",
      alertAtLimitTitle: "Limite de ofertas ativas atingido",
      maxItemsError: "Máximo de 10 itens por oferta.",
      searchPlaceholder: "Buscar por nome...",
      allCategories: "Todos",
      selectedCount: "Selecionados",
      loadMore: "Carregar mais",
      loadingMore: "A carregar…",
      noResults: "Nenhum item encontrado com esses filtros.",
      noItems: "Nenhum item cadastrado.",
      clearFilters: "Limpar filtros",
      searching: "Buscando itens…",
      removeItem: "Remover",
      quantity: "Quantidade",
      viewDetails: "Ver detalhes do item",
      have: "Eu tenho (Vender)",
      want: "Eu quero (Comprar)",
      selectItems: "Selecione os itens",
      selected: "Selecionados",
      maxPerItem: "quantidade máx. 30 por item",
      addItem: "Adicionar item",
      publish: "Publicar oferta",
      publishing: "Publicando…",
      backToMarket: "Voltar para o mercado",
    },
    calculator: {
      title: "Calculadora de trade",
      description: "Adicione os itens que você dá e os que você recebe. A calculadora usa o valor em Legendary Chests para dizer se a troca é boa ou ruim.",
      youGive: "O que você dá",
      youReceive: "O que você recebe",
      swap: "troca",
      addItem: "Adicionar item",
      total: "Total",
      goodTrade: "Boa troca",
      goodTradeDesc: "Você recebe cerca de {percent}% a mais em valor.",
      badTrade: "Troca ruim",
      badTradeDesc: "Você está dando cerca de {percent}% a mais em valor.",
      fairTrade: "Troca equilibrada",
      fairTradeDesc: "Os valores estão próximos.",
      difference: "Diferença",
      addItemsHint: "Adicione itens em cada lado para calcular se a troca é boa ou ruim.",
    },
    listingDetail: {
      itemsTitle: "Itens da oferta",
      reputation: "Reputação",
      neverSharePasswords: "Nunca passe senhas. Negocie apenas itens dentro do jogo.",
      deleteOffer: "Excluir oferta",
      acceptTrade: "Aceitar troca",
      noItems: "Nenhum item nesta oferta.",
      discontinued: "Descontinuado",
    },
    footer: {
      disclaimer: "GPO Trader não é afiliado, endossado ou de qualquer forma ligado à Roblox Corporation ou ao jogo Grand Piece Online. Todas as marcas são de seus respectivos donos.",
      terms: "Termos de uso",
    },
    common: {
      save: "Salvar",
      cancel: "Cancelar",
      close: "Fechar",
      loading: "A carregar…",
      error: "Erro",
    },
    auth: {
      title: "Entrar",
      connectDiscord: "Conectar com Discord",
      redirect: "Redirecionando…",
    },
    errors: {
      selectOneItem: "Selecione pelo menos 1 item.",
      maxItems: "Máximo de 10 itens por oferta.",
      qtyRange: "Quantidade deve ser entre 1 e 30 por item.",
      accountBlocked: "Sua conta está bloqueada para criar ofertas (strikes: {count}).",
      accountTooNew: "Conta Discord muito nova. É necessário ter pelo menos 30 dias de conta para criar ofertas (anti-Sybil).",
      atLimit: "Limite de ofertas ativas atingido ({max} para seu tier). Cancele uma oferta ou suba de nível.",
      rateLimit: "Muitas ofertas criadas nos últimos minutos. Aguarde antes de criar outra.",
    },
    itemDetail: {
      title: "Detalhes do item",
      priceLegChests: "Preço em Legendary Chests",
      wapLastWeek: "Preço médio (WAP) — última semana",
      volumeLastWeek: "Volume de mercado (última semana)",
      tradesLastWeek: "Trocas na última semana",
      noMarketData: "Ainda não há dados de mercado para este item na última semana.",
      volatility: "Volatilidade",
      itemNotFound: "Item não encontrado.",
      loading: "A carregar…",
    },
  },
  en: {
    nav: {
      calculator: "Calculator",
      login: "Login with Discord",
      loginShort: "Log in",
      dashboard: "Dashboard",
      newOffer: "New offer",
      logout: "Log out",
      admin: "Admin",
      adminItems: "Item prices",
      disputes: "Disputes",
      rep: "REP",
      back: "Back",
      viewOffer: "View offer",
      theme: "Theme",
      light: "Light",
      dark: "Dark",
      language: "Language",
    },
    home: {
      title: "GPO Trader",
      subtitle: "Secure Grand Piece Online Market",
      description: "Web of Trust for fair trades in GPO. Real reputation, no scams.",
      heroTitle: "Master the",
      heroSubtitle: "Secure trades, no scams. Real reputation, double confirmation and fair prices — what you agree is what you get.",
      ctaMarket: "Explore Market",
      ctaSell: "Sell Item",
      statusAlpha: "Status: Development (Alpha)",
      whyTitle: "Why trade here?",
      feature1Title: "Trust Protocol",
      feature1Desc: "Reputation system based on real trades. Older accounts and clean history carry more weight — no fakes, no manipulation.",
      feature2Title: "Fair Price",
      feature2Desc: "Anti-inflation algorithm: suggested prices from weighted average of recent trades, with more weight for Yonko and Brokers.",
      feature3Title: "Security",
      feature3Desc: "Double verification: buyer and seller confirm the trade in-game. Only then reputation updates and the deal closes.",
      footerTagline: "GPO Trader · Secure market for Grand Piece Online",
      cta: "View market",
      statsTrades: "Trades",
      statsVolume: "Volume",
      statsUsers: "Users",
    },
    auth: {
      title: "Log in",
      connectDiscord: "Connect with Discord",
      redirect: "Redirecting…",
    },
    errors: {
      selectOneItem: "Select at least 1 item.",
      maxItems: "Maximum 10 items per offer.",
      qtyRange: "Quantity must be between 1 and 30 per item.",
      accountBlocked: "Your account is blocked from creating offers (strikes: {count}).",
      accountTooNew: "Discord account too new. You need at least 30 days to create offers (anti-Sybil).",
      atLimit: "Active offer limit reached ({max} for your tier). Cancel an offer or level up.",
      rateLimit: "Too many offers created recently. Wait before creating another.",
    },
    itemDetail: {
      title: "Item details",
      priceLegChests: "Price in Legendary Chests",
      wapLastWeek: "Average price (WAP) — last week",
      volumeLastWeek: "Market volume (last week)",
      tradesLastWeek: "Trades last week",
      noMarketData: "No market data for this item in the last week yet.",
      volatility: "Volatility",
      itemNotFound: "Item not found.",
      loading: "Loading…",
    },
    market: {
      title: "Market",
      titleGlobal: "Global market",
      description: "Recent offers from verified players.",
      loadMore: "Load more offers",
      noListings: "No offers at the moment.",
      selling: "Selling",
      buying: "Buying",
      itemsInPackage: "items in package",
      item: "item",
      clickDetails: "Click for details",
      backToMarket: "Back to market",
      createOffer: "Create offer",
      analytics: "Market / Economy",
      emptyTitle: "The market is empty",
      emptyDesc: "Be the first to list an item and earn reputation.",
      createFirstOffer: "Create first offer",
      online: "Online",
      user: "User",
    },
    create: {
      title: "New offer",
      description: "Choose offer type and items. Max 10 items per offer; quantity 1–30 per item.",
      activeListings: "Active offers",
      typeLabel: "Offer type",
      alertBlockedTitle: "Account blocked from creating offers",
      alertTooNewTitle: "Discord account too new",
      alertAtLimitTitle: "Active offer limit reached",
      maxItemsError: "Maximum 10 items per offer.",
      searchPlaceholder: "Search by name...",
      allCategories: "All",
      selectedCount: "Selected",
      loadMore: "Load more",
      loadingMore: "Loading…",
      noResults: "No items found with these filters.",
      noItems: "No items registered.",
      clearFilters: "Clear filters",
      searching: "Searching items…",
      removeItem: "Remove",
      quantity: "Quantity",
      viewDetails: "View item details",
      have: "I have (Sell)",
      want: "I want (Buy)",
      selectItems: "Select items",
      selected: "Selected",
      maxPerItem: "max 30 per item",
      addItem: "Add item",
      publish: "Publish offer",
      publishing: "Publishing…",
      backToMarket: "Back to market",
    },
    calculator: {
      title: "Trade calculator",
      description: "Add the items you give and the items you receive. The calculator uses Legendary Chest value to tell if the trade is good or bad.",
      youGive: "What you give",
      youReceive: "What you receive",
      swap: "swap",
      addItem: "Add item",
      total: "Total",
      goodTrade: "Good trade",
      goodTradeDesc: "You receive about {percent}% more in value.",
      badTrade: "Bad trade",
      badTradeDesc: "You are giving about {percent}% more in value.",
      fairTrade: "Fair trade",
      fairTradeDesc: "Values are close.",
      difference: "Difference",
      addItemsHint: "Add items on each side to calculate if the trade is good or bad.",
    },
    listingDetail: {
      itemsTitle: "Offer items",
      reputation: "Reputation",
      neverSharePasswords: "Never share passwords. Only negotiate in-game items.",
      deleteOffer: "Delete offer",
      acceptTrade: "Accept trade",
      noItems: "No items in this offer.",
      discontinued: "Discontinued",
    },
    footer: {
      disclaimer: "GPO Trader is not affiliated with, endorsed by, or connected to Roblox Corporation or Grand Piece Online. All trademarks belong to their respective owners.",
      terms: "Terms of use",
    },
    common: {
      save: "Save",
      cancel: "Cancel",
      close: "Close",
      loading: "Loading…",
      error: "Error",
    },
  },
} as const;

export type TranslationKey = keyof typeof translations.pt;

function getNested(obj: Record<string, unknown>, path: string): string | undefined {
  const keys = path.split(".");
  let current: unknown = obj;
  for (const key of keys) {
    if (current == null || typeof current !== "object") return undefined;
    current = (current as Record<string, unknown>)[key];
  }
  return typeof current === "string" ? current : undefined;
}

export function t(locale: Locale, key: string, params?: Record<string, string | number>): string {
  const value = getNested(translations[locale] as Record<string, unknown>, key);
  if (value == null) return getNested(translations.pt as Record<string, unknown>, key) ?? key;
  if (!params) return value;
  return Object.entries(params).reduce(
    (acc, [k, v]) => acc.replace(new RegExp(`\\{${k}\\}`, "g"), String(v)),
    value
  );
}
